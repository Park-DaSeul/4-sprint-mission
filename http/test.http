# For more info on the REST Client extension, see: https://marketplace.visualstudio.com/items?itemName=humao.rest-client

# @baseUrl = http://localhost:3000
@baseUrl = http://54.180.227.72

#http://54.180.227.72, http://localhost:3000

# =================================================================
# User
# =================================================================

### 회원가입
# @name signup
POST {{baseUrl}}/auth/signup
Content-Type: application/json

{
  "email": "test2@test.com",
  "password": "password123",
  "nickname": "슬이당3"
}

### 로그인
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test2@test.com",
  "password": "password123"
}

### 토큰 재발급
# @name refresh
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{ 
}

### 로그아웃
# @name logout
POST {{baseUrl}}/auth/logout

### 사용자 조회
# @name getUser
GET {{baseUrl}}/users/me

### 사용자가 등록한 상품 조회
# @name getUserProduct
GET {{baseUrl}}/users/me/products

### 사용자가 좋아요 누른 상품 조회
# @name getUserLike
GET {{baseUrl}}/users/me/likes

### 사용자 이미지 생성
# @name createUserImage
@s3Url-user = {{createUserImage.response.body.data.url}}
@key-user = {{createUserImage.response.body.data.fields.key}}
@algorithm-user = {{createUserImage.response.body.data.fields.X-Amz-Algorithm}}
@credential-user = {{createUserImage.response.body.data.fields.X-Amz-Credential}}
@date-user = {{createUserImage.response.body.data.fields.X-Amz-Date}}
@policy-user = {{createUserImage.response.body.data.fields.Policy}}
@signature-user = {{createUserImage.response.body.data.fields.X-Amz-Signature}}
POST {{baseUrl}}/images/upload
Content-Type: application/json

{
  "filename": "test.png",
  "contentType": "image/png"
}

### 사용자 이미지 업로드
# @name createUserImageUpload
POST {{s3Url-user}}
Content-Type: multipart/form-data; boundary=upload-boundary

--upload-boundary
Content-Disposition: form-data; name="key"

{{key-user}}
--upload-boundary
Content-Disposition: form-data; name="Content-Type"

image/png
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Algorithm"

{{algorithm-user}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Credential"

{{credential-user}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Date"

{{date-user}}
--upload-boundary
Content-Disposition: form-data; name="Policy"

{{policy-user}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Signature"

{{signature-user}}
--upload-boundary
Content-Disposition: form-data; name="file"; filename="test.png"
Content-Type: image/png

< ./image/test.png
--upload-boundary--

### 사용자 수정
# @name updateUser
PUT {{baseUrl}}/users/me
Content-Type: application/json

{
  "nickname": "슬이당",
  "password": "password123",
  "newPassword": "password123",
  "imageKey": "{{key-user}}"
}

### 사용자 삭제
# @name deleteUser
DELETE {{baseUrl}}/users/me
Content-Type: application/json

{
  "password": "password123"
}

# =================================================================
# Product
# =================================================================

### 상품 이미지 생성
# @name createProductImage
@s3Url-product = {{createProductImage.response.body.data.url}}
@key-product = {{createProductImage.response.body.data.fields.key}}
@algorithm-product = {{createProductImage.response.body.data.fields.X-Amz-Algorithm}}
@credential-product = {{createProductImage.response.body.data.fields.X-Amz-Credential}}
@date-product = {{createProductImage.response.body.data.fields.X-Amz-Date}}
@policy-product = {{createProductImage.response.body.data.fields.Policy}}
@signature-product = {{createProductImage.response.body.data.fields.X-Amz-Signature}}
POST {{baseUrl}}/images/upload
Content-Type: application/json

{
  "filename": "test2.png",
  "contentType": "image/png"
}

### 이미지 업로드
# @name createProductImageUpload
POST {{s3Url-product}}
Content-Type: multipart/form-data; boundary=upload-boundary

--upload-boundary
Content-Disposition: form-data; name="key"

{{key-product}}
--upload-boundary
Content-Disposition: form-data; name="Content-Type"

image/png
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Algorithm"

{{algorithm-product}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Credential"

{{credential-product}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Date"

{{date-product}}
--upload-boundary
Content-Disposition: form-data; name="Policy"

{{policy-product}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Signature"

{{signature-product}}
--upload-boundary
Content-Disposition: form-data; name="file"; filename="test2.png"
Content-Type: image/png

< ./image/test2.png
--upload-boundary--

### 상품 생성
# @name createProduct
@productId = {{createProduct.response.body.data.id}}
POST {{baseUrl}}/products
Content-Type: application/json

{
  "name": "상품생성2",
  "description": "이건 테스트 시험입니다.",
  "price": 99.99,
  "tags": ["arewr"],
  "imageKeys": ["{{key-product}}"]
}



### 모든 상품 조회
# @name getProducts
GET {{baseUrl}}/products

### 특정 상품 조회
# @name getProductById
GET {{baseUrl}}/products/{{productId}}

### 상품 수정
# @name updateProduct
PUT {{baseUrl}}/products/{{productId}}
Content-Type: application/json

{
  "name": "상품수정4",
  "description": "이건 테스트 시험입니다.",
  "price": 40000,
  "tags": ["수정"]
}

### 상품 삭제
# @name deleteProduct
DELETE {{baseUrl}}/products/{{productId}}

### 상품 댓글 생성
# @name createProductComment
@productCommentId = {{createProductComment.response.body.data.id}}
POST {{baseUrl}}/products/{{productId}}/comments
Content-Type: application/json

{
  "content": "웹소켓 생기?"
}

### 상품 모든 댓글 조회
# @name getProductComments
GET {{baseUrl}}/products/{{productId}}/comments

### 상품 특정 댓글 조회
# @name getProductCommentById
GET {{baseUrl}}/productComments/{{productCommentId}}

### 상품 댓글 수정
# @name updateProductComment
PUT {{baseUrl}}/productComments/{{productCommentId}}
Content-Type: application/json

{
  "content": "수정댓글"
}

### 상품 댓글 삭제
# @name deleteProductComment
DELETE {{baseUrl}}/productComments/{{productCommentId}}

### 상품 좋아요
# @name createProductLike
POST {{baseUrl}}/products/{{productId}}/likes

# =================================================================
# Article
# =================================================================

### 게시글 이미지 생성
# @name createArticleImage
@s3Url-article = {{createArticleImage.response.body.data.url}}
@key-article = {{createArticleImage.response.body.data.fields.key}}
@algorithm-article = {{createArticleImage.response.body.data.fields.X-Amz-Algorithm}}
@credential-article = {{createArticleImage.response.body.data.fields.X-Amz-Credential}}
@date-article = {{createArticleImage.response.body.data.fields.X-Amz-Date}}
@policy-article = {{createArticleImage.response.body.data.fields.Policy}}
@signature-article = {{createArticleImage.response.body.data.fields.X-Amz-Signature}}
POST {{baseUrl}}/images/upload
Content-Type: application/json

{
  "filename": "test3.png",
  "contentType": "image/png"
}

### 게시글 이미지 업로드
# @name createArticleImageUpload
POST {{s3Url-article}}
Content-Type: multipart/form-data; boundary=upload-boundary

--upload-boundary
Content-Disposition: form-data; name="key"

{{key-article}}
--upload-boundary
Content-Disposition: form-data; name="Content-Type"

image/png
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Algorithm"

{{algorithm-article}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Credential"

{{credential-article}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Date"

{{date-article}}
--upload-boundary
Content-Disposition: form-data; name="Policy"

{{policy-article}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Signature"

{{signature-article}}
--upload-boundary
Content-Disposition: form-data; name="file"; filename="test3.png"
Content-Type: image/png

< ./image/test3.png
--upload-boundary--


### 게시글 생성
# @name createArticle
@articleId = {{createArticle.response.body.data.id}}
POST {{baseUrl}}/articles
Content-Type: application/json

{
  "title": "테스트로 만든다2",
  "content": "한글로 만들어야지2",
  "imageKeys": ["{{key-article}}"]
}

### 모든 게시글 조회
# @name getArticles
GET {{baseUrl}}/articles

### 특정 게시글 조회
# @name getArticleById
GET {{baseUrl}}/articles/{{articleId}}


### 게시글 수정
# @name updateArticle
PUT {{baseUrl}}/articles/{{articleId}}
Content-Type: application/json

{
  "title": "아티클을 수정하자",
  "content": "이건 수정된 내용1"
}

### 게시글 삭제
# @name deleteArticle
DELETE {{baseUrl}}/articles/{{articleId}} 



### 게시글 댓글 생성
# @name createArticleComment
@articleCommentId = {{createArticleComment.response.body.data.id}}
POST {{baseUrl}}/articles/{{articleId}}/comments
Content-Type: application/json

{
  "content": "소켓 2번쨰 가즈아"
}

### 게시글 모든 댓글 조회
# @name getComments
GET {{baseUrl}}/articles/{{articleId}}/comments

### 특정 게시글 댓글 조회
# @name getCommentById
GET {{baseUrl}}/articleComments/{{articleCommentId}}

### 게시글 댓글 수정
# @name updateComment
PUT {{baseUrl}}/articleComments/{{articleCommentId}}
Content-Type: application/json

{
  "content": "수정1212댓글"
}

### 게시글 댓글 삭제
# @name deleteComment
DELETE {{baseUrl}}/articleComments/{{articleCommentId}}

### 게시글 좋아요
# @name createProductLike
POST {{baseUrl}}/articles/{{articleId}}/likes

# =================================================================
# Notification
# =================================================================

### 사용자 모든 알림 조회
# @name getNotifications
@notificationId = {{getNotifications.response.body.data.notifications[0].id}}
GET {{baseUrl}}/notifications

### 사용자 모든 개수 조회 (안읽음)
# @name getUnreadCount
GET {{baseUrl}}/notifications/unreadCount

### 사용자 모든 알림 수정 (읽음)
# @name updateAllNotification
PUT {{baseUrl}}/notifications/all

### 사용자 알림 수정 (읽음)
# @name updateNotification
PUT {{baseUrl}}/notifications/{{notificationId}}

# =================================================================
# Image
# =================================================================

### 이미지 생성
# @name createImage
@s3Url = {{createImage.response.body.data.url}}
@key = {{createImage.response.body.data.fields.key}}
@algorithm = {{createImage.response.body.data.fields.X-Amz-Algorithm}}
@credential = {{createImage.response.body.data.fields.X-Amz-Credential}}
@date = {{createImage.response.body.data.fields.X-Amz-Date}}
@policy = {{createImage.response.body.data.fields.Policy}}
@signature = {{createImage.response.body.data.fields.X-Amz-Signature}}
POST {{baseUrl}}/images/upload
Content-Type: application/json

{
  "filename": "test4.png",
  "contentType": "image/png"
}

### 이미지 업로드
# @name createImageUpload
POST {{s3Url}}
Content-Type: multipart/form-data; boundary=upload-boundary

--upload-boundary
Content-Disposition: form-data; name="key"

{{key}}
--upload-boundary
Content-Disposition: form-data; name="Content-Type"

image/png
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Algorithm"

{{algorithm}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Credential"

{{credential}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Date"

{{date}}
--upload-boundary
Content-Disposition: form-data; name="Policy"

{{policy}}
--upload-boundary
Content-Disposition: form-data; name="X-Amz-Signature"

{{signature}}
--upload-boundary
Content-Disposition: form-data; name="file"; filename="test4.png"
Content-Type: image/png

< ./image/test4.png
--upload-boundary--


# ### 사용자 이미지 테스트
# # @name userImageUpload
# POST {{baseUrl}}/userImages
# Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

# ------WebKitFormBoundary7MA4YWxkTrZu0gW
# Content-Disposition: form-data; name="image"; filename="test.png"
# Content-Type: image/png

# < ./image/test.png
# ------WebKitFormBoundary7MA4YWxkTrZu0gW--


# ### 게시글 이미지 업로드
# # @name createArticleImage
# POST {{baseUrl}}/articleImages
# Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

# ------WebKitFormBoundary7MA4YWxkTrZu0gW
# Content-Disposition: form-data; name="image"; filename="test3.png"
# Content-Type: image/png

# < ./image/test3.png
# ------WebKitFormBoundary7MA4YWxkTrZu0gW--

# ### 상품 이미지 업로드
# # @name createProductImage
# POST {{baseUrl}}/productImages
# Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

# ------WebKitFormBoundary7MA4YWxkTrZu0gW
# Content-Disposition: form-data; name="image"; filename="test2.png"
# Content-Type: image/png

# < ./image/test2.png
# ------WebKitFormBoundary7MA4YWxkTrZu0gW--
